{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"mask\", \"type\", \"options\", \"defaultValue\", \"onChangeText\", \"value\", \"inputAccessoryView\", \"autoCapitalize\", \"textBold\", \"textItalic\", \"textDecoration\", \"style\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useEffect, useState, forwardRef } from 'react';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { mask, unMask } from \"../utils/mask\";\nexport var MaskedTextInputComponent = function MaskedTextInputComponent(_ref, ref) {\n  var _ref$mask = _ref.mask,\n      pattern = _ref$mask === void 0 ? '' : _ref$mask,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'custom' : _ref$type,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options,\n      defaultValue = _ref.defaultValue,\n      onChangeText = _ref.onChangeText,\n      value = _ref.value,\n      inputAccessoryView = _ref.inputAccessoryView,\n      _ref$autoCapitalize = _ref.autoCapitalize,\n      autoCapitalize = _ref$autoCapitalize === void 0 ? 'sentences' : _ref$autoCapitalize,\n      textBold = _ref.textBold,\n      textItalic = _ref.textItalic,\n      textDecoration = _ref.textDecoration,\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var styleSheet = _objectSpread(_objectSpread({}, typeof style === 'object' ? style : {}), {}, {\n    fontWeight: textBold && 'bold',\n    fontStyle: textItalic && 'italic',\n    textDecorationLine: textDecoration\n  });\n\n  var getMaskedValue = function getMaskedValue(value) {\n    return mask(value, pattern, type, options, autoCapitalize);\n  };\n\n  var getUnMaskedValue = function getUnMaskedValue(value) {\n    return unMask(value, type);\n  };\n\n  var defaultValueCustom = defaultValue || '';\n  var defaultValueCurrency = defaultValue || '0';\n  var initialRawValue = value;\n  var initialMaskedValue = getMaskedValue(type === 'currency' ? defaultValueCurrency : defaultValueCustom);\n  var initialUnMaskedValue = getUnMaskedValue(type === 'currency' ? defaultValueCurrency : defaultValueCustom);\n\n  var _useState = useState(initialMaskedValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      maskedValue = _useState2[0],\n      setMaskedValue = _useState2[1];\n\n  var _useState3 = useState(initialUnMaskedValue),\n      _useState4 = _slicedToArray(_useState3, 2),\n      unMaskedValue = _useState4[0],\n      setUnmaskedValue = _useState4[1];\n\n  var _useState5 = useState(initialRawValue),\n      _useState6 = _slicedToArray(_useState5, 2),\n      rawValue = _useState6[0],\n      setRawValue = _useState6[1];\n\n  var actualValue = pattern || type === \"currency\" ? maskedValue : rawValue;\n\n  function onChange(value) {\n    var newUnMaskedValue = unMask(value, type);\n    var newMaskedValue = mask(newUnMaskedValue, pattern, type, options);\n    setMaskedValue(newMaskedValue);\n    setUnmaskedValue(newUnMaskedValue);\n    setRawValue(value);\n  }\n\n  useEffect(function () {\n    onChangeText(maskedValue, unMaskedValue);\n  }, [maskedValue, unMaskedValue]);\n  useEffect(function () {\n    if (value) {\n      setMaskedValue(getMaskedValue(value));\n      setUnmaskedValue(getUnMaskedValue(value));\n    } else {\n      setMaskedValue(initialMaskedValue);\n      setUnmaskedValue(initialUnMaskedValue);\n    }\n  }, [value]);\n  return React.createElement(React.Fragment, null, React.createElement(TextInput, _extends({\n    onChangeText: function onChangeText(value) {\n      return onChange(value);\n    },\n    ref: ref,\n    maxLength: pattern.length || undefined\n  }, rest, {\n    value: actualValue,\n    style: _objectSpread({}, styleSheet)\n  })), inputAccessoryView);\n};\nexport var MaskedTextInput = forwardRef(MaskedTextInputComponent);","map":{"version":3,"mappings":"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","names":["React","useEffect","useState","forwardRef","mask","unMask","MaskedTextInputComponent","ref","_ref","pattern","type","options","defaultValue","onChangeText","value","inputAccessoryView","autoCapitalize","textBold","textItalic","textDecoration","style","rest","styleSheet","fontWeight","fontStyle","textDecorationLine","getMaskedValue","getUnMaskedValue","defaultValueCustom","defaultValueCurrency","initialRawValue","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","rawValue","setRawValue","actualValue","onChange","newUnMaskedValue","newMaskedValue","TextInput","_extends","maxLength","length","undefined","MaskedTextInput"],"sources":["MaskedTextInput.tsx"],"sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { FormatType, MaskOptions, StyleObj, TextDecorationOptions } from 'src/@types'\n\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: FormatType\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n  inputAccessoryView?: JSX.Element\n  autoCapitalize?: 'characters' | 'words' | 'sentences' | 'none'\n  textBold?: boolean\n  textItalic?:boolean\n  textDecoration?:TextDecorationOptions\n  style?: StyleObj\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    value,\n    inputAccessoryView,\n    autoCapitalize = 'sentences',\n    textBold,\n    textItalic,\n    textDecoration,\n    style,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const styleSheet = {\n    ...(typeof style === 'object' ? style : {}),\n    fontWeight:textBold && 'bold',\n    fontStyle: textItalic && 'italic',\n    textDecorationLine: textDecoration\n  }\n  const getMaskedValue = (value: string) =>\n    mask(value, pattern, type, options, autoCapitalize)\n  const getUnMaskedValue = (value: string) =>\n    unMask(value, type as 'custom' | 'currency')\n\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n\n  const initialRawValue = value;\n\n  const initialMaskedValue = getMaskedValue(\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\n  )\n\n  const initialUnMaskedValue = getUnMaskedValue(\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\n  )\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue)\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue)\n  const [rawValue, setRawValue] = useState(initialRawValue);\n  const actualValue = pattern || type === \"currency\" ? maskedValue : rawValue;\n\n  function onChange(value: string) {\n    const newUnMaskedValue = unMask(value, type as 'custom' | 'currency')\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options)\n\n    setMaskedValue(newMaskedValue)\n    setUnmaskedValue(newUnMaskedValue)\n    setRawValue(value);\n  }\n\n  useEffect(() => {\n    onChangeText(maskedValue, unMaskedValue)\n  }, [maskedValue, unMaskedValue])\n\n  useEffect(() => {\n    if (value) {\n      setMaskedValue(getMaskedValue(value))\n      setUnmaskedValue(getUnMaskedValue(value))\n    } else {\n      setMaskedValue(initialMaskedValue)\n      setUnmaskedValue(initialUnMaskedValue)\n    }\n  }, [value])\n\n  return (\n    <>\n      <TextInput\n        onChangeText={(value) => onChange(value)}\n        ref={ref}\n        maxLength={pattern.length || undefined}\n        {...rest}\n        value={actualValue}\n        style={{...styleSheet} as StyleObj}\n      />\n      {inputAccessoryView}\n    </>\n  )\n}\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent)\n"]},"metadata":{},"sourceType":"module"}